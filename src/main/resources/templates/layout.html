<!doctype html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>Blogy</title>

       <!-- <link href="https://fonts.googleapis.com/css?family=Playfair&#43;Display:700,900&amp;display=swap" rel="stylesheet"> -->
        <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet" />
      <!--  <link th:href="@{/css/blog.css}" rel="stylesheet" /> -->

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
    </head>
    <body>
        <div class="container">
            <header class="lh-1 py-3">
                <div class="row flex-nowrap justify-content-between align-items-center">
                    <div class="col-4">
                        <nav class="nav">
                            <a class="nav-link" href="/">Home</a>
                            <a class="nav-link" href="/rss">RSS</a>
                            <a class="nav-link" href="/admin" sec:authorize="hasRole('ROLE_ADMIN')">Admin</a>
                        </nav>
                    </div>
                    <div class="col-4">
                        <form action="">
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Type here to search" />
                                <button class="btn btn-outline-secondary" type="submit">
                                    <i class="bi bi-search"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                    <div class="col-4 d-flex justify-content-end align-items-center">
                        <div sec:authorize="isAuthenticated()">
                            Welcome, <span sec:authentication="name" />!
                            <form action="/user/logout" method="post" class="d-inline">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                <button type="submit" class="btn btn-outline-secondary" >Logout</button>
                            </form>
                        </div>
                        <div sec:authorize="isAnonymous()">
                            <a href="/user/login" class="btn btn-outline-secondary">Login</a>
                        </div>
                    </div>
                </div>
            </header>
           <!-- <div class="nav-scroller py-1 mb-2">
                <nav class="nav d-flex justify-content-between">
                    <a class="p-2 link-secondary"
                       th:each="category : ${categories}"
                       th:href="@{/categories/{name}(name=${category.name})}"
                       th:text="${category.name}"
                    />
                </nav>
            </div> -->
            <main class="mb-4">
                <div class="p-5 p-md-5 mb-4 rounded text-bg-dark">
                    <div class="col-md-8 px-0">
                        <h1 class="display-4 fst-italic" th:text='${settings.get("title")}' />
                        <h2 class="lead my-3" th:text='${settings.get("description")}' />
                    </div>
                </div>
                <div class="row g-5">
                    <div class="col-md-8">
                        <section layout:fragment="content"></section>
                    </div>
                    <div class="col-md-4">
                        <div class="position-sticky">
                            <div class="card mb-3">
                                <div class="card-header">Categories</div>
                                <nav class="nav flex-column">
                                    <a class="nav-link"
                                       th:each="category : ${categories}"
                                       th:href="@{/categories/{name}(name=${category.name})}"
                                       th:text="${category.name}" />
                                </nav>
                            </div>

                            <div class="card mb-3">
                                <div class="card-header">Archives</div>
                                <nav class="nav flex-column">
                                    <a class="nav-link"
                                       th:each="item: ${archive}"
                                       th:href="@{/archive/{month}/{year}(month=${item.key.month.value}, year=${item.key.year})}">
                                        <span th:text="${#temporals.format(item.key)}"></span>
                                        <span class="badge text-bg-secondary" th:text="${item.value}" />
                                    </a>
                                </nav>
                            </div>

                            <div class="card mb-3">
                                <div class="card-header">Elsewhere</div>
                                <nav class="nav flex-column">
                                    <a href="https://github.com/ivanovx" class="nav-link">Github</a>
                                    <a href="https://www.facebook.com/ivanovdotpro" class="nav-link">Twitter</a>
                                    <a href="https://www.facebook.com/ivanovdotpro" class="nav-link">Facebook</a>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            <footer class="border-top">
                <div class="row mt-3">
                    <div class="col-md-6 text-center">
                        (c) 2023 <a href="https://www.ivanov.pro" target="_blank" class="link">Ivan Ivanov</a>.
                    </div>
                    <div class="col-md-6 text-center">
                        <a href="https://github.com/ivanovx/blogy" target="_blank" class="link">Open Source Project</a>
                    </div>
                </div>
            </footer>
        </div>
    </body>
</html>